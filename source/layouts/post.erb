<% wrap_layout :layout do %>
  <% content_for :meta_description, strip_tags(article_summary(current_article)).html_safe %>
  <section class="post">
    <div class="container container-xs">
      <article class="post">
        <div class="post-heading">
          <h1 class="post-title"><%=current_article.title%></h1>
          <div class="post-metadata">
            <div class="read-time">
              <%= inline_svg "ionicons/ios-timer.svg", class: "icon-timer" %>
              <%= read_length(article_body(current_article)) %> min read
            </div>
            <div class="date">
              <%= current_article.date.strftime("%b %d, %Y") %>
            </div>
          </div>
        </div>

        <div class="post-body">
          <div class="markdown">
            <%= article_body(current_article) %>
          </div>

          <div class="kudo-container" style="display: none" data-post-id="<%=current_article.slug%>">
            <button class="kudo-button" aria-label="Give this post a kudo">
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" class="kudo-heart" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" xml:space="preserve">
                <path class="kudo-heart-path" id="kudo-heart-path" d="M429.9,95.6c-40.4-42.1-106-42.1-146.4,0L256,124.1l-27.5-28.6c-40.5-42.1-106-42.1-146.4,0c-45.5,47.3-45.5,124.1,0,171.4   L256,448l173.9-181C475.4,219.7,475.4,142.9,429.9,95.6z" />
              </svg>
            </button>
            <div class="kudo-count-message">
              <span class="kudo-count"></span> <span class="kudo-word"></span>
            </div>
            <div class="kudo-thanks">
              <div class="kudo-thanks-heading">Thanks!</div>
            </div>
          </div>
        </div> <!-- post-body -->
      </article>
    </div>
  </section>
<% end %>
